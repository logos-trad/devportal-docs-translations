# Invio notifiche tramite API B2B

I servizi di PN offrono API di inoltro notifiche. L’inoltro si effettua in due fasi. Nella prima fase si effettua l’upload degli allegati (atti e modelli di pagamento). Nella seconda fase si procede all’inoltro della richiesta di invio della notifica, fornendo tutte le informazioni necessarie, inclusi i riferimenti ai documenti precedentemente caricati in piattaforma e la loro hash SHA-256 calcolata dalla PA ed utilizzata da PN per confermare il contenuto del file allegato. Se le informazioni fornite per la notifica sono sintatticamente corrette, PN restituisce un identificativo temporaneo che verrà utilizzato da PN per trasmettere alla PA l’esito delle ulteriori e successive verifiche. A questo punto PN verifica che tutti i file siano disponibili, abbiano formato PDF e siano firmati digitalmente dalla PA. Verifica inoltre l’esistenza dei CF prodotti dalla PA e dell’esistenza di un indirizzo fisico per ciascun destinatario. Qualora l’operazione di verifica abbia successo, viene generato uno IUN che viene restituito alla PA assieme all’identificativo temporaneo precedentemente generato. In caso contrario verrà inviato, assieme all’identificativo temporaneo, un codice di errore che indica il motivo del fallimento della verifica. Dal momento della creazione con successo di una notifica, la PA riceverà aggiornamenti sullo stato della stessa attraverso un meccanismo di polling intelligente fornito da PN. Ciascun aggiornamento di stato conterrà lo IUN della notifica alla quale si riferisce.
